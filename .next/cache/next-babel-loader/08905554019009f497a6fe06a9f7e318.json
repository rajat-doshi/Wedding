{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/bacancy/Desktop/Temp/Wedding/components/Public/ForgotPassword/VerifyOtp.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Input } from \"../../Common/index\";\nimport { cloneDeep } from \"lodash\";\nimport { getFormDetails } from \"../../../util/helper\";\nimport { ts, te } from \"../../../util/ReduxToaster\";\nimport { postUserVerify } from \"../../../util/Services/UserMaster\";\nimport { withRouter } from \"next/router\";\nimport { ActionLogin } from \"../../../Redux/Action/Login/index\";\nimport { connect } from \"react-redux\";\nimport Router from \"next/router\";\nvar initState = {\n  form: {\n    otp: \"\",\n    errors: {\n      otp: null\n    }\n  },\n  loading: false\n};\n\nvar VerifyOtpComponent = function VerifyOtpComponent(props) {\n  var _useState = useState(cloneDeep(initState)),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var form = state.form; // handle change event\n\n  var onInputChange = function onInputChange(name, value) {\n    var error = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n    var form = state.form;\n    form[name] = value;\n\n    if (error !== undefined) {\n      var errors = form.errors;\n      errors[name] = error;\n    }\n\n    setState({\n      form: form\n    });\n  }; // handle validation\n\n\n  var onInputValidate = function onInputValidate(name, error) {\n    var errors = state.form.errors;\n    errors[name] = error;\n    setState({\n      form: _objectSpread({}, state.form, {\n        errors: errors\n      })\n    });\n  };\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    var form = state.form,\n        id = state.id;\n    var obj = getFormDetails(form, onInputValidate);\n\n    if (!obj) {\n      te(\"Please Enter required field\");\n      return false;\n    }\n\n    if (obj) {\n      state.loading = true;\n      setState(_objectSpread({}, state));\n      postUserVerify({\n        otp: obj.otp,\n        email_address: props.router.query[\"email-address\"]\n      }).then(function (res) {\n        if (res.error) {\n          return;\n        }\n\n        if (res.data.error) {\n          te(res.data.message);\n        } else {\n          localStorage.setItem(\"token\", res.data.data.token);\n          Router.push(\"/forgot-password/change-password\");\n          ts(res.data.message);\n        }\n\n        state.loading = false;\n        setState(_objectSpread({}, state));\n      });\n    }\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    \"class\": \"login-form form-main\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: function onSubmit(e) {\n      handleSubmit(e);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row mt-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-lg-12\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(Input, {\n    className: \"form-control\",\n    placeholder: \"Please enter otp\",\n    onChangeFunc: onInputChange,\n    validationFunc: onInputValidate,\n    name: \"otp\",\n    value: form.otp,\n    error: form.errors.otp,\n    title: \"Otp\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"row mt-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-lg-12\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"btn btn-primary form-control\",\n    type: \"submit\",\n    disabled: state.loading,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, state.loading ? \"Please wait...\" : \"Sent otp\")))))));\n};\n\nexport default connect(function (state) {\n  return state;\n}, {\n  ActionLogin: ActionLogin\n})(withRouter(VerifyOtpComponent));","map":{"version":3,"sources":["/home/bacancy/Desktop/Temp/Wedding/components/Public/ForgotPassword/VerifyOtp.js"],"names":["React","useEffect","useState","Input","cloneDeep","getFormDetails","ts","te","postUserVerify","withRouter","ActionLogin","connect","Router","initState","form","otp","errors","loading","VerifyOtpComponent","props","state","setState","onInputChange","name","value","error","undefined","onInputValidate","handleSubmit","e","preventDefault","id","obj","email_address","router","query","then","res","data","message","localStorage","setItem","token","push"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Input } from \"../../Common/index\";\nimport { cloneDeep } from \"lodash\";\nimport { getFormDetails } from \"../../../util/helper\";\nimport { ts, te } from \"../../../util/ReduxToaster\";\nimport { postUserVerify } from \"../../../util/Services/UserMaster\";\nimport { withRouter } from \"next/router\";\nimport { ActionLogin } from \"../../../Redux/Action/Login/index\";\nimport { connect } from \"react-redux\";\nimport Router from \"next/router\";\nconst initState = {\n  form: {\n    otp: \"\",\n\n    errors: {\n      otp: null,\n    },\n  },\n  loading: false,\n};\nconst VerifyOtpComponent = (props) => {\n  const [state, setState] = useState(cloneDeep(initState));\n  let { form } = state;\n\n  // handle change event\n  const onInputChange = (name, value, error = undefined) => {\n    const { form } = state;\n    form[name] = value;\n\n    if (error !== undefined) {\n      let { errors } = form;\n      errors[name] = error;\n    }\n    setState({ form });\n  };\n  // handle validation\n  const onInputValidate = (name, error) => {\n    let { errors } = state.form;\n    errors[name] = error;\n    setState({ form: { ...state.form, errors: errors } });\n  };\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    const { form, id } = state;\n\n    let obj = getFormDetails(form, onInputValidate);\n    if (!obj) {\n      te(\"Please Enter required field\");\n      return false;\n    }\n\n    if (obj) {\n      state.loading = true;\n      setState({ ...state });\n      postUserVerify({\n        otp: obj.otp,\n        email_address: props.router.query[\"email-address\"],\n      }).then((res) => {\n        if (res.error) {\n          return;\n        }\n        if (res.data.error) {\n          te(res.data.message);\n        } else {\n          localStorage.setItem(\"token\", res.data.data.token);\n          Router.push(\"/forgot-password/change-password\");\n          ts(res.data.message);\n        }\n        state.loading = false;\n        setState({ ...state });\n      });\n    }\n  };\n\n  return (\n    <>\n      <div class=\"login-form form-main\">\n        <div className=\"container\">\n          <form\n            onSubmit={(e) => {\n              handleSubmit(e);\n            }}\n          >\n            <div className=\"row mt-2\">\n              <div className=\"col-lg-12\">\n                <Input\n                  className=\"form-control\"\n                  placeholder=\"Please enter otp\"\n                  onChangeFunc={onInputChange}\n                  validationFunc={onInputValidate}\n                  name=\"otp\"\n                  value={form.otp}\n                  error={form.errors.otp}\n                  title=\"Otp\"\n                />\n              </div>\n            </div>\n\n            <div className=\"row mt-2\">\n              <div className=\"col-lg-12\">\n                <button\n                  className=\"btn btn-primary form-control\"\n                  type=\"submit\"\n                  disabled={state.loading}\n                >\n                  {state.loading ? \"Please wait...\" : \"Sent otp\"}\n                </button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default connect((state) => state, { ActionLogin })(\n  withRouter(VerifyOtpComponent)\n);\n"]},"metadata":{},"sourceType":"module"}