{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/bacancy/Desktop/Temp/Wedding/components/Public/ForgotPassword/ChangePassword.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Input } from \"../../Common/index\";\nimport { cloneDeep } from \"lodash\";\nimport { getFormDetails } from \"../../../util/helper\";\nimport { ts, te } from \"../../../util/ReduxToaster\";\nimport { postChangePassword } from \"../../../util/Services/UserMaster\";\nimport { withRouter } from \"next/router\";\nimport { ActionLogin } from \"../../../Redux/Action/Login/index\";\nimport { connect } from \"react-redux\";\nimport Router from \"next/router\";\nvar initState = {\n  form: {\n    password: \"\",\n    conifrm_password: \"\",\n    errors: {\n      password: null,\n      conifrm_password: null\n    }\n  },\n  loading: false\n};\n\nvar ChangePassword = function ChangePassword(props) {\n  var _useState = useState(cloneDeep(initState)),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var form = state.form; // handle change event\n\n  var onInputChange = function onInputChange(name, value) {\n    var error = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n    var form = state.form;\n    form[name] = value;\n\n    if (error !== undefined) {\n      var errors = form.errors;\n      errors[name] = error;\n    }\n\n    setState({\n      form: form\n    });\n  }; // handle validation\n\n\n  var onInputValidate = function onInputValidate(name, error) {\n    var errors = state.form.errors;\n    errors[name] = error;\n    setState({\n      form: _objectSpread({}, state.form, {\n        errors: errors\n      })\n    });\n  };\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    var form = state.form;\n    var obj = getFormDetails(form, onInputValidate);\n\n    if (!obj) {\n      te(\"Please Enter required field\");\n      return false;\n    }\n\n    if (obj) {\n      state.loading = true;\n      setState(_objectSpread({}, state));\n      postChangePassword({\n        token: localStorage.getItem(\"token\"),\n        password: obj.password\n      }).then(function (res) {\n        if (res.error) {\n          return;\n        }\n\n        if (res.data.error) {\n          te(res.data.message);\n        } else {\n          localStorage.setItem(\"token\", \"\");\n          Router.push(\"/login\");\n          ts(res.data.message);\n        }\n\n        state.loading = false;\n        setState(_objectSpread({}, state));\n      });\n    }\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    \"class\": \"login-form form-main\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: function onSubmit(e) {\n      handleSubmit(e);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row mt-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-lg-12\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(Input, {\n    className: \"form-control\",\n    placeholder: \"Please enter password\",\n    onChangeFunc: onInputChange,\n    validationFunc: onInputValidate,\n    name: \"password\",\n    value: form.password,\n    error: form.errors.password,\n    title: \"Password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"row mt-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-lg-12\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, React.createElement(Input, {\n    className: \"form-control\",\n    placeholder: \"Please enter conifrm password\",\n    onChangeFunc: onInputChange,\n    validationFunc: onInputValidate,\n    name: \"conifrm_password\",\n    value: form.conifrm_password,\n    error: form.errors.conifrm_password,\n    title: \"Conifrm password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"row mt-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-lg-12\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"btn btn-primary form-control\",\n    type: \"submit\",\n    disabled: state.loading,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, state.loading ? \"Please wait...\" : \"Sent otp\")))))));\n};\n\nexport default connect(function (state) {\n  return state;\n}, {\n  ActionLogin: ActionLogin\n})(withRouter(ChangePassword));","map":{"version":3,"sources":["/home/bacancy/Desktop/Temp/Wedding/components/Public/ForgotPassword/ChangePassword.js"],"names":["React","useEffect","useState","Input","cloneDeep","getFormDetails","ts","te","postChangePassword","withRouter","ActionLogin","connect","Router","initState","form","password","conifrm_password","errors","loading","ChangePassword","props","state","setState","onInputChange","name","value","error","undefined","onInputValidate","handleSubmit","e","preventDefault","obj","token","localStorage","getItem","then","res","data","message","setItem","push"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Input } from \"../../Common/index\";\nimport { cloneDeep } from \"lodash\";\nimport { getFormDetails } from \"../../../util/helper\";\nimport { ts, te } from \"../../../util/ReduxToaster\";\nimport { postChangePassword } from \"../../../util/Services/UserMaster\";\nimport { withRouter } from \"next/router\";\nimport { ActionLogin } from \"../../../Redux/Action/Login/index\";\nimport { connect } from \"react-redux\";\nimport Router from \"next/router\";\nconst initState = {\n  form: {\n    password: \"\",\n    conifrm_password: \"\",\n    errors: {\n      password: null,\n      conifrm_password: null,\n    },\n  },\n  loading: false,\n};\nconst ChangePassword = (props) => {\n  const [state, setState] = useState(cloneDeep(initState));\n  let { form } = state;\n\n  // handle change event\n  const onInputChange = (name, value, error = undefined) => {\n    const { form } = state;\n    form[name] = value;\n\n    if (error !== undefined) {\n      let { errors } = form;\n      errors[name] = error;\n    }\n    setState({ form });\n  };\n  // handle validation\n  const onInputValidate = (name, error) => {\n    let { errors } = state.form;\n    errors[name] = error;\n    setState({ form: { ...state.form, errors: errors } });\n  };\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const { form } = state;\n    let obj = getFormDetails(form, onInputValidate);\n    if (!obj) {\n      te(\"Please Enter required field\");\n      return false;\n    }\n    if (obj) {\n      state.loading = true;\n      setState({ ...state });\n      postChangePassword({\n        token: localStorage.getItem(\"token\"),\n        password: obj.password,\n      }).then((res) => {\n        if (res.error) {\n          return;\n        }\n        if (res.data.error) {\n          te(res.data.message);\n        } else {\n          localStorage.setItem(\"token\", \"\");\n          Router.push(\"/login\");\n          ts(res.data.message);\n        }\n        state.loading = false;\n        setState({ ...state });\n      });\n    }\n  };\n\n  return (\n    <>\n      <div class=\"login-form form-main\">\n        <div className=\"container\">\n          <form\n            onSubmit={(e) => {\n              handleSubmit(e);\n            }}\n          >\n            <div className=\"row mt-2\">\n              <div className=\"col-lg-12\">\n                <Input\n                  className=\"form-control\"\n                  placeholder=\"Please enter password\"\n                  onChangeFunc={onInputChange}\n                  validationFunc={onInputValidate}\n                  name=\"password\"\n                  value={form.password}\n                  error={form.errors.password}\n                  title=\"Password\"\n                />\n              </div>\n            </div>\n            <div className=\"row mt-2\">\n              <div className=\"col-lg-12\">\n                <Input\n                  className=\"form-control\"\n                  placeholder=\"Please enter conifrm password\"\n                  onChangeFunc={onInputChange}\n                  validationFunc={onInputValidate}\n                  name=\"conifrm_password\"\n                  value={form.conifrm_password}\n                  error={form.errors.conifrm_password}\n                  title=\"Conifrm password\"\n                />\n              </div>\n            </div>\n            <div className=\"row mt-2\">\n              <div className=\"col-lg-12\">\n                <button\n                  className=\"btn btn-primary form-control\"\n                  type=\"submit\"\n                  disabled={state.loading}\n                >\n                  {state.loading ? \"Please wait...\" : \"Sent otp\"}\n                </button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default connect((state) => state, { ActionLogin })(\n  withRouter(ChangePassword)\n);\n"]},"metadata":{},"sourceType":"module"}