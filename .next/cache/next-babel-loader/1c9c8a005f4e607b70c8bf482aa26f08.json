{"ast":null,"code":"import _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/bacancy/Desktop/Temp/Wedding/components/Public/Login/Login.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { Input } from \"../../Common/index\";\nimport Head from \"../../head\";\nimport { cloneDeep } from \"lodash\";\nimport withRedux from \"next-redux-wrapper\";\nimport makeStore from \"../../../Redux/index\";\nimport { getFormDetails } from \"../../../util/helper\";\nimport { ts, te } from \"../../../util/ReduxToaster\";\nimport Nav from \"../../nav\";\nimport { postLogin } from \"../../../util/Services/UserMaster\";\nimport { ActionLogin } from \"../../../Redux/Action/Login/index\";\nimport { connect } from \"react-redux\";\nimport Router from \"next/router\";\nimport Link from \"next/link\";\nvar initState = {\n  form: {\n    email_address: \"\",\n    password: \"\",\n    errors: {\n      email_address: null,\n      password: null\n    }\n  },\n  loading: false\n};\n\nvar LoginComponent = function LoginComponent(props) {\n  var _useState = useState(cloneDeep(initState)),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var form = state.form; // handle change event\n\n  var onInputChange = function onInputChange(name, value) {\n    var error = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n    var form = state.form;\n    form[name] = value;\n\n    if (error !== undefined) {\n      var errors = form.errors;\n      errors[name] = error;\n    }\n\n    setState({\n      form: form\n    });\n  }; // handle validation\n\n\n  var onInputValidate = function onInputValidate(name, error) {\n    var errors = state.form.errors;\n    errors[name] = error;\n    setState({\n      form: _objectSpread({}, state.form, {\n        errors: errors\n      })\n    });\n  };\n\n  var handleSubmit = function handleSubmit(e) {\n    e.preventDefault();\n    var history = props.history;\n    var formData = new FormData();\n    var form = state.form,\n        id = state.id;\n    var obj = getFormDetails(form, onInputValidate);\n\n    if (!obj) {\n      te(\"Please Enter required field\");\n      return false;\n    }\n\n    if (obj) {\n      state.loading = true;\n      setState(_objectSpread({}, state));\n      postLogin(obj).then(function (res) {\n        if (res.error) {\n          return;\n        }\n\n        if (res.data.error) {\n          te(res.data.message);\n        } else {\n          Router.push(\"/user\");\n          props.ActionLogin(res.data.data);\n          localStorage.setItem(\"token\", res.data.data._id);\n          ts(res.data.message);\n        }\n\n        state.loading = false;\n        setState(_objectSpread({}, state));\n      });\n    }\n  };\n\n  return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    \"class\": \"login-form form-main\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: function onSubmit(e) {\n      handleSubmit(e);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"row mt-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-lg-12\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(Input, {\n    className: \"form-control\",\n    placeholder: \"Email Address\",\n    onChangeFunc: onInputChange,\n    validationFunc: onInputValidate,\n    name: \"email_address\",\n    value: form.email_address,\n    error: form.errors.email_address,\n    title: \"Email Address\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"row mt-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-lg-12\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(Input, {\n    className: \"form-control\",\n    placeholder: \"Password\",\n    onChangeFunc: onInputChange,\n    validationFunc: onInputValidate,\n    name: \"password\",\n    value: form.password,\n    error: form.errors.password,\n    title: \"Password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"row mt-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-lg-12\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"btn btn-primary form-control\",\n    type: \"submit\",\n    disabled: state.loading,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, state.loading ? \"Please wait...\" : \"Login\"))), React.createElement(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-lg-12\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }), React.createElement(Link, {\n    href: \"/forgot-password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, \" Forgot password\")))))));\n};\n\nexport default connect(function (state) {\n  return state;\n}, {\n  ActionLogin: ActionLogin\n})(LoginComponent);","map":{"version":3,"sources":["/home/bacancy/Desktop/Temp/Wedding/components/Public/Login/Login.js"],"names":["React","useEffect","useState","Input","Head","cloneDeep","withRedux","makeStore","getFormDetails","ts","te","Nav","postLogin","ActionLogin","connect","Router","Link","initState","form","email_address","password","errors","loading","LoginComponent","props","state","setState","onInputChange","name","value","error","undefined","onInputValidate","handleSubmit","e","preventDefault","history","formData","FormData","id","obj","then","res","data","message","push","localStorage","setItem","_id"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Input } from \"../../Common/index\";\nimport Head from \"../../head\";\nimport { cloneDeep } from \"lodash\";\nimport withRedux from \"next-redux-wrapper\";\nimport makeStore from \"../../../Redux/index\";\nimport { getFormDetails } from \"../../../util/helper\";\nimport { ts, te } from \"../../../util/ReduxToaster\";\nimport Nav from \"../../nav\";\nimport { postLogin } from \"../../../util/Services/UserMaster\";\nimport { ActionLogin } from \"../../../Redux/Action/Login/index\";\nimport { connect } from \"react-redux\";\nimport Router from \"next/router\";\nimport Link from \"next/link\";\nconst initState = {\n  form: {\n    email_address: \"\",\n    password: \"\",\n    errors: {\n      email_address: null,\n      password: null,\n    },\n  },\n  loading: false,\n};\nconst LoginComponent = (props) => {\n  const [state, setState] = useState(cloneDeep(initState));\n  let { form } = state;\n\n  // handle change event\n  const onInputChange = (name, value, error = undefined) => {\n    const { form } = state;\n    form[name] = value;\n\n    if (error !== undefined) {\n      let { errors } = form;\n      errors[name] = error;\n    }\n    setState({ form });\n  };\n  // handle validation\n  const onInputValidate = (name, error) => {\n    let { errors } = state.form;\n    errors[name] = error;\n    setState({ form: { ...state.form, errors: errors } });\n  };\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    let { history } = props;\n    let formData = new FormData();\n    const { form, id } = state;\n\n    let obj = getFormDetails(form, onInputValidate);\n    if (!obj) {\n      te(\"Please Enter required field\");\n      return false;\n    }\n\n    if (obj) {\n      state.loading = true;\n      setState({ ...state });\n      postLogin(obj).then((res) => {\n        if (res.error) {\n          return;\n        }\n        if (res.data.error) {\n          te(res.data.message);\n        } else {\n          Router.push(\"/user\");\n          props.ActionLogin(res.data.data);\n          localStorage.setItem(\"token\", res.data.data._id);\n          ts(res.data.message);\n        }\n        state.loading = false;\n        setState({ ...state });\n      });\n    }\n  };\n\n  return (\n    <>\n    <div class=\"login-form form-main\">\n      <div className=\"container\">\n        <form\n          onSubmit={(e) => {\n            handleSubmit(e);\n          }}\n        >\n          <div className=\"row mt-2\">\n            <div className=\"col-lg-12\">\n              <Input\n                className=\"form-control\"\n                placeholder=\"Email Address\"\n                onChangeFunc={onInputChange}\n                validationFunc={onInputValidate}\n                name=\"email_address\"\n                value={form.email_address}\n                error={form.errors.email_address}\n                title=\"Email Address\"\n              />\n            </div>\n          </div>\n          <div className=\"row mt-2\">\n            <div className=\"col-lg-12\">\n              <Input\n                className=\"form-control\"\n                placeholder=\"Password\"\n                onChangeFunc={onInputChange}\n                validationFunc={onInputValidate}\n                name=\"password\"\n                value={form.password}\n                error={form.errors.password}\n                title=\"Password\"\n              />\n            </div>\n          </div>\n          <div className=\"row mt-2\">\n            <div className=\"col-lg-12\">\n              <button\n                className=\"btn btn-primary form-control\"\n                type=\"submit\"\n                disabled={state.loading}\n              >\n                {state.loading ? \"Please wait...\" : \"Login\"}\n              </button>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-lg-12\">\n              <br/>\n             <Link href=\"/forgot-password\"> Forgot password</Link>\n            </div>\n          </div>\n        </form>\n      </div>\n      </div>\n    </>\n  );\n};\n\nexport default connect((state) => state, { ActionLogin })(LoginComponent);\n"]},"metadata":{},"sourceType":"module"}